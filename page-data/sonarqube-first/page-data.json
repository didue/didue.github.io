{"componentChunkName":"component---src-templates-post-tsx","path":"/sonarqube-first/","result":{"data":{"markdownRemark":{"html":"<p><img src=\"https://media.vlpt.us/images/3rd-big/post/6304e3ad-127b-4392-8a0b-da0c942bb556/sonarqube-logo@2x.png\">\n<br/><br/></p>\n<p>좋은 시스템에서 좋은 코드를 보고 배우며 성장하는 유토피아를 꿈꾸는 주니어였지만 , 현실은 하드코딩 난무하는 <code class=\"language-text\">레거시코드</code>와 <code class=\"language-text\">통계업무지옥</code>에 치이고 약간은 타성에 젖어가며... 저는 어느덧 2년 n개월차 주니어로 살고 있었습니다.😥\n<br/></p>\n<p>그때 만난 <a href=\"https://sogoagain.github.io/2020/03/08/%EB%A0%88%EA%B1%B0%EC%8B%9C-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%A0%90%EC%A7%84%EC%A0%81%EC%9C%BC%EB%A1%9C-%EA%B0%9C%EC%84%A0%ED%95%9C-%EA%B2%BD%ED%97%98/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">이글</a>이 저에게 뭔가 <code class=\"language-text\">trigger</code>가 되었습니다! 글 내용 중 가장 와닿았던 부분은 </p>\n<br/>\n<blockquote>\n<ul>\n<li>레거시 코드는 다른 사람이 \"처음\" 작성해야 하는 처지였음을 잊지 말아야 한다. </li>\n<li>레거시 코드를 만난다고 실망에 그칠 것이 아닌 적극적으로 개선시키는 태도가 필요하다.</li>\n</ul>\n</blockquote>\n<br/>\n<p>라는 부분 이었습니다. 레거시 코드를 두고 투덜대기만 할 것이 아니라 저 스스로가 <code class=\"language-text\">적극적인 태도</code>를 가지고 개선하려는 마음 가짐을 갖게 하는 좋은 초석이 되었습니다. 저 조차도 6개월 전에 제가 쓴 코드를 보고도 '아니 이건 왜 이렇게 짰담?🤔' 하는 경우가 있었기 때문에(<del>나만 그런거 아니라고 해줘...</del>) 더욱 더 공감되는 부분이였습니다.\n<br/></p>\n<p>그래서 지금 운영 유지보수로 업무하고 있는 프로젝트의 코드 개선을 위해 <code class=\"language-text\">SonarQube</code>를 도입한 경험을 공유합니다. 🕺💃\n<br/><br/></p>\n<hr>\n<br/>\n<h2 id=\"sonarqube-web-설정하기\" style=\"position:relative;\"><a href=\"#sonarqube-web-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"sonarqube web 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SonarQube Web 설정하기</h2>\n<p>설치에 앞서 <code class=\"language-text\">SonarQube</code>를 도입한 환경은 프로젝트 개발서버(테스트서버)로 리눅스 RedHat 환경을 기준으로 작성하였습니다. 설치된 프로젝트는 <em>maven, gradle을 사용하지 않는 Spring 프로젝트 환경</em>임을 명시합니다.</p>\n<p>우선, 소나큐브를 통해 코드 품질 분석을 하려면 <code class=\"language-text\">SonarQube</code>와 <code class=\"language-text\">SonarScanner</code> 그리고 <code class=\"language-text\">PostgresQL</code>이 필요합니다. 차례대로 설치하여 구동해봅시다!\n<br/><br/></p>\n<h3 id=\"1-postgresql-설치\" style=\"position:relative;\"><a href=\"#1-postgresql-%EC%84%A4%EC%B9%98\" aria-label=\"1 postgresql 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. PostgreSQL 설치</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#postgresql 설치 </span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> postgresql\n\n<span class=\"token comment\">#계정을 postgres로 변경 </span>\n<span class=\"token function\">su</span> -u postgres\n\n<span class=\"token comment\">#postgresql 커맨드 실행</span>\npsql </code></pre></div>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#소나큐브 유저생성</span>\nCREATE <span class=\"token environment constant\">USER</span> sonar WITH ENCRYPTED PASSWORD <span class=\"token string\">'sonar2020!!'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">#DB생성</span>\nCREATE DATABASE sonar OWNER sonar<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">#DB권한설정</span>\nALTER ROLE sonar WITH CREATEDB<span class=\"token punctuation\">;</span>\nGRANT ALL PRIVILGES ON DATABASE sonar TO sonar<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 커맨드 종료(exit) 후 재시작</span>\n$ systemctl restart postgresql</code></pre></div>\n<br/>\n<h3 id=\"2-sonarqube-설치\" style=\"position:relative;\"><a href=\"#2-sonarqube-%EC%84%A4%EC%B9%98\" aria-label=\"2 sonarqube 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. SonarQube 설치</h3>\n<br/>\n<p>홈페이지 <a href=\"https://www.sonarqube.org/downloads/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">다운로드</a> 페이지에서 소나큐브를 다운로드 받아 설치하여 봅시다. 이때 소나큐브를 사용하려면 서버에 <code class=\"language-text\">jdk</code>도 설치되어있어야 하니 <code class=\"language-text\">Open JDK 8</code>버전으로 미리 다운로드를 받아 두도록 합니다.</p>\n<br/>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#설치경로 (개인에게 맞는 경로로 사용하길 추천)</span>\n<span class=\"token function\">mkdir</span> /opt/sonarqube\n\n<span class=\"token comment\">#SonarQube 다운로드</span>\n<span class=\"token function\">wget</span> https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-7.2.1.zip\n\n<span class=\"token comment\">#압축 해제 </span>\n<span class=\"token function\">unzip</span> sonarqube-7.2.1.zip\n\n<span class=\"token comment\">#파일 이동</span>\n<span class=\"token function\">mv</span> sonarqube-7.2.1 /opt/sonarqube</code></pre></div>\n<br/>\n<p>소나큐브가 설치된 경로에서 에디터를 사용하여 <code class=\"language-text\">sonar.properties</code>를 속성을 변경해봅시다!</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#디렉토리 이동 </span>\n<span class=\"token builtin class-name\">cd</span> /opt/sonarqube/conf\n\n<span class=\"token comment\">#설정파일 변경 </span>\n<span class=\"token function\">vi</span> sonar.properties</code></pre></div>\n<br/>\n<p><code class=\"language-text\">sonar.properties</code>에서 아래의 내용에 있는 <code class=\"language-text\">key</code>를 찾아 <a href=\"#1.-PostgreSQL-%EC%84%A4%EC%B9%98\">1. PostgreSQL-설치</a> 에서 설정한 대로 속성을 수정을 하시면 됩니다!</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">#### jdbc 설정\nsonar.jdbc.username=sonar\nsonar.jdbc.password=sonar\nsonar.jdbc.url=jdbc:postgresql://localhost/sonar\n\n#### WEB서버 설정\nsonar.web.javaOpts=-Xmx3096m -Xms2048m -XX:+HeapDumpOnOutOfMemoryError\nsonar.web.javaAdditionalOpts=-server\n\nsonar.web.host=0.0.0.0\nsonar.web.port=9000\n#9001번 port는 소나큐브내부의 elastic search가 사용하므로 지양</code></pre></div>\n<br/>\n<h3 id=\"3-sonarqube-실행\" style=\"position:relative;\"><a href=\"#3-sonarqube-%EC%8B%A4%ED%96%89\" aria-label=\"3 sonarqube 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. SonarQube 실행</h3>\n<br/>\n<p>이제 기초 준비가 되었으면 소나큐브를 잘 설치되었는지 구동 커맨드를 실행해 봅니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#소나큐브 설치 경로 이동 </span>\n<span class=\"token builtin class-name\">cd</span> /opt/sonarqube/bin\n\n<span class=\"token comment\">#실행커맨드 </span>\n<span class=\"token comment\">#(옵션 목록 : console | start | stop | restart | status | dump)</span>\n./sonar.sh start</code></pre></div>\n<br/>\n<p>정상적으로 실행되었다면, <a href=\"#2.-SonarQube-%EC%84%A4%EC%B9%98\">2. SonarQube 설치</a>에 설정한 대로 웹콘솔은 <code class=\"language-text\">9000</code>번 포트에서 확인 할 수 있습니다. 타란~🙆‍♀️ 소나큐브의 초기 계정정보는 id와 pw 모두 <code class=\"language-text\">admin</code>을 사용중이니 <strong>꼭!</strong>  변경하여 사용하도록 하자! </p>\n<p>(우측상단 프로필 클릭 > My Account > Security 탭에서 수정 가능)</p>\n<p><img src=\"sonar-console04.png\"></p>\n<br/>\n<p>여기까지 소나큐브 설치 방법은 완료되었고, 프로젝트 등록 및 코드스캔에 대한 내용은 2편에서 이어서 금방 돌아오겠습니다💁‍♀️</p>\n<br/>\n<hr>\n<br/>\n<h3 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h3>\n<ul>\n<li>sonarsource Community <a href=\"https://community.sonarsource.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://community.sonarsource.com/</a></li>\n<li>sonarQube 설치하기 <a href=\"https://info-lab.tistory.com/183\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://info-lab.tistory.com/183</a></li>\n<li>PostgresQL 가이드북 <a href=\"http://www.devkuma.com/books/pages/1459\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.devkuma.com/books/pages/1459</a></li>\n</ul>","excerpt":"좋은 시스템에서 좋은 코드를 보고 배우며 성장하는 유토피아를 꿈꾸는 주니어였지만 , 현실은 하드코딩 난무하는 와 에 치이고 약간은 타성에 젖어가며... 저는 어느덧 2년 n개월차 주니어로 살고 있었습니다.😥\n 그때 만난 이글이 저에게 뭔가 가 되었습…","tableOfContents":"<ul>\n<li>\n<p><a href=\"/sonarqube-first/#sonarqube-web-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">SonarQube Web 설정하기</a></p>\n<ul>\n<li><a href=\"/sonarqube-first/#1-postgresql-%EC%84%A4%EC%B9%98\">1. PostgreSQL 설치</a></li>\n<li><a href=\"/sonarqube-first/#2-sonarqube-%EC%84%A4%EC%B9%98\">2. SonarQube 설치</a></li>\n<li><a href=\"/sonarqube-first/#3-sonarqube-%EC%8B%A4%ED%96%89\">3. SonarQube 실행</a></li>\n<li><a href=\"/sonarqube-first/#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/sonarqube-first/"},"frontmatter":{"title":"코드 품질관리 SonarQube 도입기(1) - 설치하기","date":"Jul 27, 2021","tags":["TIL","SonarQube","PostgresQL"],"keywords":["sonarqube","TIL","Linux","PostgresQL"],"update":"Jan 01, 0001"}}},"pageContext":{"slug":"/sonarqube-first/","series":[],"lastmod":"2021-07-27"}},"staticQueryHashes":["2027115977","694178885"]}